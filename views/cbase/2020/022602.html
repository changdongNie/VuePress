<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>运算符和类型强制转换 | 沧海一粟</title>
    <meta name="description" content="  ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/VuePress/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/VuePress/assets/css/0.styles.3cddcafc.css" as="style"><link rel="preload" href="/VuePress/assets/js/app.b31fce86.js" as="script"><link rel="preload" href="/VuePress/assets/js/3.d221ede1.js" as="script"><link rel="preload" href="/VuePress/assets/js/1.1dcb4397.js" as="script"><link rel="preload" href="/VuePress/assets/js/16.2c3055cc.js" as="script"><link rel="prefetch" href="/VuePress/assets/js/10.60161d99.js"><link rel="prefetch" href="/VuePress/assets/js/11.b4a7258f.js"><link rel="prefetch" href="/VuePress/assets/js/12.01c5aa26.js"><link rel="prefetch" href="/VuePress/assets/js/13.d8f31ec4.js"><link rel="prefetch" href="/VuePress/assets/js/14.ebd8fc5c.js"><link rel="prefetch" href="/VuePress/assets/js/15.7569c437.js"><link rel="prefetch" href="/VuePress/assets/js/17.26fcf2e9.js"><link rel="prefetch" href="/VuePress/assets/js/18.f6a27021.js"><link rel="prefetch" href="/VuePress/assets/js/19.454c7779.js"><link rel="prefetch" href="/VuePress/assets/js/4.695215f9.js"><link rel="prefetch" href="/VuePress/assets/js/5.a799364d.js"><link rel="prefetch" href="/VuePress/assets/js/6.b341ee5d.js"><link rel="prefetch" href="/VuePress/assets/js/7.ba88ee77.js"><link rel="prefetch" href="/VuePress/assets/js/8.2b1f9f61.js"><link rel="prefetch" href="/VuePress/assets/js/9.c944edab.js">
    <link rel="stylesheet" href="/VuePress/assets/css/0.styles.3cddcafc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>沧海一粟</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>聂</span>
            
          <span data-v-6cbeab0a>2017 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuePress/" class="home-link router-link-active"><img src="/VuePress/logo.png" alt="沧海一粟" class="logo"> <span class="site-name">沧海一粟</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuePress/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      系列
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/views/git/2020/index.html" class="nav-link"><i class="iconfont reco-category"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/views/cbase/2020/index.html" class="nav-link"><i class="iconfont reco-category"></i>
  c#
</a></li></ul></div></div><div class="nav-item"><a href="/VuePress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/VuePress/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/VuePress/23.jpg" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    聂
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>8</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>2</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/VuePress/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      系列
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress/views/git/2020/index.html" class="nav-link"><i class="iconfont reco-category"></i>
  git
</a></li><li class="dropdown-item"><!----> <a href="/VuePress/views/cbase/2020/index.html" class="nav-link"><i class="iconfont reco-category"></i>
  c#
</a></li></ul></div></div><div class="nav-item"><a href="/VuePress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/VuePress/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>运算符和类型强制转换</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/VuePress/views/cbase/2020/022602.html#运算符" class="sidebar-link">运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_1-条件运算符" class="sidebar-link">1.条件运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_2-checked和unchecked运算符" class="sidebar-link">2. checked和unchecked运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_3-is运算符" class="sidebar-link">3. is运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_4-as运算符" class="sidebar-link">4. as运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_5-sizeof运算符" class="sidebar-link">5. sizeof运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_6-typeof运算符" class="sidebar-link">6. typeof运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_7-nameof运算" class="sidebar-link">7. nameof运算</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_8-index运算符" class="sidebar-link">8.index运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_9-可空类型和运算符" class="sidebar-link">9.可空类型和运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_10-合并运算符" class="sidebar-link">10.合并运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#_11-空值条件运算符" class="sidebar-link">11.空值条件运算符</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#运算符优先级" class="sidebar-link">运算符优先级</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#类型的安全" class="sidebar-link">类型的安全</a></li><li class="sidebar-sub-header"><a href="/VuePress/views/cbase/2020/022602.html#装箱拆箱" class="sidebar-link">装箱拆箱</a></li></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#比较对象的相等性" class="sidebar-link">比较对象的相等性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#比较值类型的相等性" class="sidebar-link">比较值类型的相等性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#运算符重载" class="sidebar-link">运算符重载</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#重载算数运算符" class="sidebar-link">重载算数运算符</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#重载比较运算符" class="sidebar-link">重载比较运算符</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#实现自定义的索引运算符" class="sidebar-link">实现自定义的索引运算符</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress/views/cbase/2020/022602.html#用户定义类型强制转换" class="sidebar-link">用户定义类型强制转换</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>运算符和类型强制转换</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>聂</span>
            
          <span data-v-6cbeab0a>2017 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>运算符和类型强制转换</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>聂</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2020-02-26</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      基础
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h2> <table><thead><tr><th>类别</th> <th>运算符</th></tr></thead> <tbody><tr><td>逻辑运算符</td> <td>&amp; |^ ~ &amp;&amp; || !</td></tr> <tr><td>递增和递减</td> <td>++ --</td></tr> <tr><td>空值条件运算符</td> <td>?. ?[]</td></tr> <tr><td>标识符的名称运算符</td> <td>nameof()</td></tr> <tr><td>条件运算符（三元运算符）</td> <td>?:</td></tr> <tr><td>类型信息运算符</td> <td>sizeof is   typeof as</td></tr> <tr><td>溢出异常控制运算符</td> <td>checked unchecked</td></tr> <tr><td>命名空间别名限定符</td> <td>::</td></tr> <tr><td>空合并运算符</td> <td>??</td></tr></tbody></table> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//++x和x++的区别，</span>
<span class="token comment">//Main方法中</span>
<span class="token keyword">int</span> x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>x<span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">'true，x先增加后比较'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">++</span><span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">'false ,x先比较后增加'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_1-条件运算符"><a href="#_1-条件运算符" class="header-anchor">#</a> 1.条件运算符</h3> <p><strong>概念：</strong> 条件运算符（?:)也称为三元运算符，是if..else结构的简化形式。</p> <p>condition ? true_value : false_value</p> <h3 id="_2-checked和unchecked运算符"><a href="#_2-checked和unchecked运算符" class="header-anchor">#</a> 2. checked和unchecked运算符</h3> <p>概念：例如byte数据类型只能包含0~255的数，如果给byte类型一个255的数，该数值自增会导致溢出得到0，CLR处理这个溢出取决于许多因素，c#提供了checked和unchecked运算符，如果把一个代码块标记为checked，CLR就会执行溢出检查，如果禁止溢出检查，可以把代码标记为unchecked。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">byte</span> b<span class="token operator">=</span><span class="token number">255</span><span class="token punctuation">;</span>
<span class="token keyword">checked</span><span class="token punctuation">{</span>
    b<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//这段代码会抛出异常OverflowException异常</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>注意</strong> unchecked是默认的行为，默认不检查上溢出和下溢出，因为执行检查会影响性能，每一个算术运算符的结果都需要验证其值是否越界。</p> <h3 id="_3-is运算符"><a href="#_3-is运算符" class="header-anchor">#</a> 3. is运算符</h3> <p><strong>概念</strong> is运算符可以检查对象是否与特定的类型兼容，兼容表示对象或者是该类型，或者派生自该类型。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//c#7 扩展了具有类型匹配的is运算符，可以检查常量，类型和var，</span>
<span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token keyword">is</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;i has the value 42&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">object</span> o<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Conosle<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;o is null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用具有类型匹配的is运算符，可以在类型的右边声明变量，如果is运算符返回true，则该变量通过对该类型的对象的引用来填充。然后可以使用is运算符的if语句范围内使用该变量。</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">AMethodUsingPatternMathching</span><span class="token punctuation">(</span><span class="token keyword">object</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token keyword">is</span> <span class="token class-name">Person</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>$<span class="token string">&quot;o is a Person with firstname { p.FirstName}&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">AMethodUsingPatternMathching</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Katharina&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nagel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_4-as运算符"><a href="#_4-as运算符" class="header-anchor">#</a> 4. as运算符</h3> <p><strong>概念：</strong> as运算符用于执行应用类型的显示类型转换。如果要转换的类型与指定的类型兼容，转换就会成功进行，如果类型不兼容，as运算符就会返回null值。as运算符允许在一步中进行安全的类型转换，不需要先使用is运算符测试类型，在执行转换。</p> <h3 id="_5-sizeof运算符"><a href="#_5-sizeof运算符" class="header-anchor">#</a> 5. sizeof运算符</h3> <p><strong>概念</strong> 使用sizeof运算符可以确定栈中值类型需要的长度（单位是字节），类不能使用sizeof运算符。类不能使用sizefo运算符。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出4，int占4个字节</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_6-typeof运算符"><a href="#_6-typeof运算符" class="header-anchor">#</a> 6. typeof运算符</h3> <p><strong>概念</strong>：typeof运算符返回一个表示特定类型的System.Type对象。例如，typeof(string) 返回表示System.String类型的Type对象，在使用反射技术动态地查找对象的相关信息。</p> <h3 id="_7-nameof运算"><a href="#_7-nameof运算" class="header-anchor">#</a> 7. nameof运算</h3> <p><strong>概念：</strong> 是一个c#6运算符，该运算符接受一个符号、属性和方法，并返回其名称。nameof运算符也可以用来得到方法的名称。如果方法是重载的，因为所有的重载版本都得到相同的值：方法名称。</p> <h3 id="_8-index运算符"><a href="#_8-index运算符" class="header-anchor">#</a> 8.index运算符</h3> <p><strong>概念</strong> 类似于数组元素，索引运算符用集合类实现。索引运算符不需要把整数放在括号内，并可以用任何类型定义。</p> <h3 id="_9-可空类型和运算符"><a href="#_9-可空类型和运算符" class="header-anchor">#</a> 9.可空类型和运算符</h3> <p><strong>概念：</strong> 值类型和引用类型的一个重要区别是，引用类型可以为空。值类型不能为空。把c#类型映射到数据库类型时，这是一个特殊的问题。数据库中的数值可以为空。每个结构可以定义为可控类型</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">int</span> i1<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> i2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> i3<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">long</span><span class="token punctuation">?</span> ii<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> a<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> b<span class="token operator">=</span>a<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token comment">//b=null</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> c<span class="token operator">=</span>a<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">//c=null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_10-合并运算符"><a href="#_10-合并运算符" class="header-anchor">#</a> 10.合并运算符</h3> <p><strong>概念：</strong> 空合并运算符（??）提供了一种快捷方式，可以在处理可控类型和引用类型时表示null值的可能性。这个运算符放在两个操作数之间，第一个操作数必须是一个可空类型或引用类型；第二个操作数必须与第二个操作数的类型相同，或者可以隐式的转换为第一个操作数的类型。</p> <p>1.如果第一个操作数不是null，整个表达式就等于第一个操作数的值</p> <p>2.如果第一个i额操作数是null，整个表达式等于第二个操作数的值。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token class-name">MyClass</span> _val<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">MyClass</span> Val<span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token operator">=&gt;</span> _val<span class="token operator">??</span><span class="token punctuation">(</span>_val<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_11-空值条件运算符"><a href="#_11-空值条件运算符" class="header-anchor">#</a> 11.空值条件运算符</h3> <p><strong>概念：</strong> c#中减少大量代码行的一个功能是空值条件运算符。当表达式左边为空时，就只返回null，而继续执行表达式右侧。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ShowPerson</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">string</span> firstName<span class="token operator">=</span>p<span class="token punctuation">?.</span>FirstName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用空值条件运算符访问int类型的属性时，不能把结果直接分配给int类型，因为记过可为空</span>
<span class="token keyword">int</span><span class="token punctuation">?</span> age1<span class="token operator">=</span>p<span class="token punctuation">?.</span>Age<span class="token punctuation">;</span>
<span class="token comment">//也可以使用空合并运算符，定义另一个结果，以防止左边的结果为空</span>
<span class="token keyword">int</span> age<span class="token operator">=</span>p<span class="token punctuation">?.</span>Age<span class="token operator">??</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//检查对象属性时，判断空值</span>
<span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token function">GetPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">string</span> city<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span>p<span class="token punctuation">.</span>HomeAddress<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    city<span class="token operator">=</span>p<span class="token punctuation">.</span>HomeAddress<span class="token punctuation">.</span>City<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用空值条件运算符会更简单</span>
<span class="token keyword">string</span> city<span class="token operator">=</span>p<span class="token punctuation">?.</span>HomeAddress<span class="token punctuation">?.</span>City<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="运算符优先级"><a href="#运算符优先级" class="header-anchor">#</a> 运算符优先级</h3> <p>在复杂的表达式中，应避免利用运算符优先级来生成正确的结果，使用圆括号制定运算符的执行顺序，可以使代码整洁，避免出现潜在的冲突</p> <h3 id="类型的安全"><a href="#类型的安全" class="header-anchor">#</a> 类型的安全</h3> <p><strong>概念</strong> 中间语言（IL)可以对其代码强制实现强类型的安全性。强类型支持.NET提供的许多服务，包括安全性和语言的交互性。因为c#语言会编译为IL，所以c#也是强类型。</p> <h3 id="装箱拆箱"><a href="#装箱拆箱" class="header-anchor">#</a> 装箱拆箱</h3> <p>简单预定义类型和复杂类型，装箱（boxing）可以把值类型转换城引用类型，拆箱（unboxing）把引用类型转换为值类型。</p> <h2 id="比较对象的相等性"><a href="#比较对象的相等性" class="header-anchor">#</a> 比较对象的相等性</h2> <p><strong>概念</strong> 对象想等到机制有所不同，这取决于比较的是引用类型（类实例）还是值类型（基本数据类型，枚举或结构的实例）</p> <h4 id="_1-比较引用类型的相等性"><a href="#_1-比较引用类型的相等性" class="header-anchor">#</a> 1.比较引用类型的相等性</h4> <p>System.Object定义了3个不同的方法来比较对象的相等性：ReferenceEquals()和两个版本的Equals():一个是静态方法，一个是可以重写的虚拟实例方法。还可以实现接口<code>IEquality&lt;T&gt;</code>,提供了一个具有泛型类型参数而不是对象Equals方法。再加上比较运算符==。</p> <p><strong>ReferenceEquals()方法</strong>：</p> <p>是一个静态方法，其测试两个引用是否指向类的同一个实例，特别的是两个引用是否包含内存中的相同地址，作为静态方法，它不能重写，所以System.Object是实现代码保持不变，如果提供的两个应用指向同一个对象实例，则ReferenceEquals()总是返回true；否则就返回false。但是它认为null等于null</p> <p><strong>Equals()虚方法</strong>：</p> <p>Equals()虚版本的System.Object实现代码也可以比较引用，但因为是虚方法，所以可以在自己的类中重写它，从而按值来比较对象，特别是如果希望实例用作字典中的键，就需要重写这个方法，以比较相关值，否则，根据重写Object.GetHashCode()的方式，包含对象都字典累要么不工作，要么工作的效率非常低，在重写Equals()方法时要注意，重写的代码不应抛出异常，问题，这个因为抛出异常，字典累就会出问题，一些在内部调用这个方法的.NET基类也可能出问题。</p> <p><strong>静态Equals()方法</strong></p> <p>Equals()的静态版本和虚拟实例版本的作用相同，其区别是静态版本带有两个参数，并对它们进行相等性比较，这个方法可以处理两个对象中有一个是null的情况；因此，如果一个对象可能是null，这个方法就可以抛出异常，提供额外的保护，静态重载版本首先检查传递给它的引用是否为null，如果它们都是null，就返回true(因为null与null相同)，如果只有一个引用是null，他就返回false，如果两个引用实际上引用了某个对象，它就调用Equals()的虚拟实例版本，这表示在重写Equals()的实例版本时，相当于也重写了静态版本。</p> <p><strong>比较运算符==</strong></p> <p>最好将比较运算符看作严格的值比较和严格的引用比较之间的中间选项。在大多数情况下，比较引用</p> <p><code>bool b=(x==y)//x,y Object referenes 对象引用</code>。如果看作值，含义就比较直观，在特殊情况下，最好重写比较运算符，以执行值的比较。System.String 类，重写了这个运算符，以比较字符串的内容，而不是比较它们的引用。</p> <h2 id="比较值类型的相等性"><a href="#比较值类型的相等性" class="header-anchor">#</a> 比较值类型的相等性</h2> <p><strong>概念</strong> 在比较值类型的相等性时，采用与引用类型的相同规则：ReferenceEquals()引用，Equals()用于此比较值，比较运算符可以看作一个中间项，但最大的区别的值类型需要装箱，才能把它们转换为引用，进而才能对它们执行方法，另外，Microsoft已经在System.ValueType类中重载了实例方法Equals(),以便对值类型进行合适的相等性测试。如果调用sA.Euqals(sB),其中sA和sB是某个结构的实例，则根据sA和sB是否在所进行的字段中包含相同的值而返回true和false，另一方面，在默认情况下，根据sA和sB是否在所有表达式用（sA==是B）会导致一个编译异常。</p> <p>ReferenceEquals()在应用于值类型时总是返回false，因为为了调用这个方法，值类型需要装箱到对象中 <code>bool b=ReferenceEquals(v,v )</code> //v 因为在转换每个参数时，v都会被单独装箱，意味着会得到不同的引用。</p> <p>System.ValueType提供Equals()默认重写版本能够应付绝大多数自定义的结构，但仍需针对自己的结构再次重写它以提高性能。如果值类型包含作为字段的引用类型，就需要重写Equals(),以便为这些字段提供合适的语义，因为默认仅比较它们的地址。</p> <h2 id="运算符重载"><a href="#运算符重载" class="header-anchor">#</a> 运算符重载</h2> <p><strong>概念：</strong> 为类或结构定义的另一种类型的成员：运算符重载。</p> <p><strong>定义：</strong> 运算符重载的声明方式和静态方法基本相同，但operator关键字告诉编辑器。它实际上是一个自定义的运算符重载，后面是相关运算符的实际符号。</p> <p><strong>要求：</strong> c#要求所有的运算符重载都声明为public和static，这表明它们与其类或结构的关联，而不是某个特定实例相关联，所以运算符的代码本体不能访问非静态类成员，也不能访问this标识符，因为参数提供了运算符执行其任务所需要直到的所有输入数据。</p> <h2 id="重载算数运算符"><a href="#重载算数运算符" class="header-anchor">#</a> 重载算数运算符</h2> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>    <span class="token keyword">struct</span> Vector<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">,</span> <span class="token keyword">double</span> z<span class="token punctuation">)</span><span class="token punctuation">{</span>
        X<span class="token operator">=</span>x<span class="token punctuation">;</span>
        Y<span class="token operator">=</span>y<span class="token punctuation">;</span>
        Z<span class="token operator">=</span>z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token class-name">Vector</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>
        X<span class="token operator">=</span>v<span class="token punctuation">.</span>X<span class="token punctuation">;</span>
        Y<span class="token operator">=</span>v<span class="token punctuation">.</span>Y<span class="token punctuation">;</span>
        Z<span class="token operator">=</span>v<span class="token punctuation">.</span>Z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> X<span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> Y<span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> Z<span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">string</span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>$<span class="token string">&quot;{X},{Y},{Z}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//main方法</span>
          <span class="token class-name">Vector</span> vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">,</span>vector3<span class="token punctuation">;</span>
            vector1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span><span class="token number">3.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            vector2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">3.0</span><span class="token punctuation">,</span><span class="token number">2.0</span><span class="token punctuation">,</span><span class="token number">1.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            vector3<span class="token operator">=</span>vector1<span class="token operator">+</span>vector2<span class="token punctuation">;</span><span class="token comment">//调用重载的方法</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>vector3<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>注意：</strong> 虽然+=一般计为单个运算符，但实际上它对应的操作分为两步：相加和赋值。与c++语言不同，C#不允许重载=运算符；但如果重载+运算符，编辑器会自动使用+运算符的重载来执行 +=运算符操作，-=  *= /= 和&amp;=等所有赋值运算符也遵循此原则。</p> <h2 id="重载比较运算符"><a href="#重载比较运算符" class="header-anchor">#</a> 重载比较运算符</h2> <p>c#中六个比较运算符：</p> <p>==和!=  &gt;和&lt; &gt;=和&lt;=</p> <p><strong>注意：</strong> 在比较两个对象时，如果==运算符返回true，就总是返回true，所以不应改变的类型上只重载==运算符。如果重载了==就必须重载!=,否则编译错误，比较运算符必须返回布尔类型的值。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Vector</span> left <span class="token punctuation">,</span><span class="token class-name">Vector</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//比较两个对象的引用地址，System.Object提供的方法，</span>
    <span class="token comment">//浅比较是比较对象是否指向内存中的同一位置。</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">.</span><span class="token function">ReferenceEquals</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>retrun <span class="token keyword">true</span><span class="token punctuation">;</span>
    <span class="token comment">//深度比较是比较对象的值和属性是否相等。</span>
    <span class="token keyword">return</span> left<span class="token punctuation">.</span>X<span class="token operator">==</span>right<span class="token punctuation">.</span>X<span class="token operator">&amp;&amp;</span>left<span class="token punctuation">.</span>Y<span class="token operator">==</span>right<span class="token punctuation">.</span>Y<span class="token operator">&amp;&amp;</span>left<span class="token punctuation">.</span>Z<span class="token operator">==</span>right<span class="token punctuation">.</span>Z<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Vector</span> left<span class="token punctuation">,</span><span class="token class-name">Vector</span> right<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token operator">!</span><span class="token punctuation">(</span>left<span class="token operator">==</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意：</strong> 不要通过调用System.Object 中继承的Equals()方法的实力版本来重载比较运算符，如果这么做，在objA是null时判断（objA==ojbB),就会产生一个异常，因为.NET运行库会试图判断null.Equals(objB)。采用其他方法重写Equals()方法比较运算符比较安全。</p> <p><strong>注意</strong> 现在Equals和GetHashCode方法，这个方法总是在重写==运算符时进行重写，否则编辑器会报错。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//重写Equals</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">bool</span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token keyword">object</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">==</span><span class="token punctuation">(</span>Vector<span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//重写GetHashCode</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">int</span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>X<span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">^</span>Y<span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">^</span>Z<span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="实现自定义的索引运算符"><a href="#实现自定义的索引运算符" class="header-anchor">#</a> 实现自定义的索引运算符</h2> <p><strong>定义</strong> 索引器看起来非常类似于属性，有哪位它包含get和set访问器，两者的不同之处。指定索引使用this关键字。this关键字后面的括号制定索引使用的类型。索引定义任何类型都是有效的。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">string</span> FirstName<span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">string</span> LastName<span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">string</span> firstName<span class="token punctuation">,</span><span class="token keyword">string</span> lastName<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>FirstName<span class="token operator">=</span>firstName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>LastName<span class="token operator">=</span>lastName；
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonCollection</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span> _people<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">PersonCollection</span><span class="token punctuation">(</span><span class="token keyword">params</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span> people<span class="token punctuation">)</span><span class="token operator">=&gt;</span>
        _people<span class="token operator">=</span>people<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//定义索引</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">int</span> index<span class="token punctuation">]</span><span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token operator">=&gt;</span>_people<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span><span class="token operator">=&gt;</span>_people<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="用户定义类型强制转换"><a href="#用户定义类型强制转换" class="header-anchor">#</a> 用户定义类型强制转换</h2> <h4 id="显示强制转换"><a href="#显示强制转换" class="header-anchor">#</a> 显示强制转换</h4> <p>对预定义的数据类型，当类型强制转换可能失败或丢失某些数据时，需要显示强制转换。c#允许定义自己的数据类型（结构和类）。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">implicit</span> <span class="token keyword">operator</span> <span class="token keyword">float</span> <span class="token punctuation">(</span><span class="token class-name">Currency</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//定义强制类型转换</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div style="float:left width:100%;"><div style="float:left;"><a href="021601.html">←泛型</a></div> <div style="float:right;"><a href="022602.html">运算符和类型强制转换→</a></div></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/VuePress/assets/js/app.b31fce86.js" defer></script><script src="/VuePress/assets/js/3.d221ede1.js" defer></script><script src="/VuePress/assets/js/1.1dcb4397.js" defer></script><script src="/VuePress/assets/js/16.2c3055cc.js" defer></script>
  </body>
</html>
